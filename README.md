# NCU-FPGA-Basys3
## Introduction

南昌大学EDA实验课程，采用**Diligent Basys3**开发板进行开发，主要使用的语言是**Verilog**，采用的软件是**Vivado2019.1**

本仓库主要包括七个实验，内容分别为：

1. **层次法设计组合电路：**

   以4位二进制全加器为例：

   （1）先用Verilog HDL文本实现一位全加器，通过调用一位全加器完成4位全加器的设计，熟悉层次设计概念；

   （2）给出此项设计的仿真波形；

   （3）下载到开发板上，用LED发光管指示显示结果，8个开关分别对应2个四位二进制加数，5个LED指示4位二进制和与进位，上下拨动开关，LED显示随之变化。

2. **模可变计数器的设计：**

   设计BCD计数器，可任选模的大小（最大模值至少3位），实验要求：

     （1）计数结果用3位数码管显示，显示BCD码；

     （2）给出此项设计的仿真波形，波形仿真应能观察到复位、使能、模值进位输出、设置模值；

     （3） 选择实验电路验证此计数器的功能，用开发板下载测试，下载测试现象与仿真相吻合；

     （4）设计模值可变的输入端口，通过输入模值和设置信号改变计数器模值；

     （5）设置涉及1个开关和一个按键，开关作为使能控制，按键作为异步清0，按键能复位，使能无效时计数暂停，能切换模值；

     （6）带有进位输出，并进位输出用LED灯显示。

3. **状态机的设计：**

   设计序列发生和检测器：

   （1）先实现串行序列发生器的设计，产生序列0101010111011110；再设计检测器，若检测到串行序列10101则输出为“1”，否则输出为“0”，并对其进行仿真和硬件测试，选择实验电路验证功能；

   （2）下载程序后，可通过一个led灯串行输出序列信号，另用五个led灯来观测待检测序列，当10101五个全部出现在led上时，标识位灯M亮起，说明检测到“10101” 的信号，即符合设计要求。

   产生的序列和检测的序列值（教师现场指定，我的是10101）。

   发生器和检测器最好异步，以确保能检测到，可以将时钟经非门后再接入检测器。

   （3）波形仿真应能观察到复位产生序列、复位检测、加载使能后序列才产生、检测到完整序列，下载测试现象与仿真相吻合。

4. **交通灯控制器设计：**

   实现一个由一条主干道和一条乡间公路形成的十字路口的交通灯控制器功能：

   （1）有MR（主红）、MY（主黄）、MG（主绿）、CR（乡红）、CY（乡黄）、CG（乡绿）六盏交通灯需要控制；

   （2）交通灯由绿转红前有4秒亮黄灯的间隔时间，由红转绿没有间隔时间；

   （3）乡间公路右侧各埋有一个串连传感器，当有车辆准备通过乡间公路时，发出请求信号S=1，其余时间S=0；

   （4）平时系统停留在主干道通行（MGCR）状态，一旦S信号有效，经主道黄灯4秒（MYCR）状态后转入乡间公路通行（MRCG）状态，但要保证主干60s后才能转换；

   （5）一旦S信号消失，系统脱离MRCG状态，即经乡道黄灯4秒（MRCY）状态进入MGCR状态，即使S信号一直有效，MRCG状态也不得长于20秒钟。

   波形仿真应能观察到S为0和1时各种状态的转换及倒计时。

   复位时，起始状态是主绿乡红，数码管从60开始倒计时。

   当60s减1计数完成后，如果s信号为1（代表乡干道有车要求通过）时，变为主黄乡绿状态，数码管4s倒计时；如果s信号为0（代表乡干道没有车要求通过）时， 则回到起始状态，主绿乡红重新60s倒计时。

   4s倒计时后，进入主红乡绿状态，如果此时s信号为0，则立即转入主红乡黄状态；如果s信号一直为1，则数码管开始20s倒计时，计数期间一旦出现s信号为0，则立即转入主红乡黄状态，即使s信号一直为1，当20s倒计时完成后也会入主红乡黄状态。

   主红乡黄，数码管开始4s倒计时，计数完成后进入主绿乡红状态，数码管60s倒计时，重复上述状态。

5. **信号发生器设计：**

   （1）数字化波形数据存在ROM中，ROM用IP核进行设计；

   （2）正弦波或方波、锯齿波波形可选并数码管显示所选波形种类；

   （3）信号频率、幅度可调并用数码管显示频率和幅值；

   （4）连接开发板，用在线观察信号的幅度、频率调制波形；

   （5）可采用DDS原理产生正弦信号。

6. **PWM信号调制器设计：**

   （1）实现单路PWM信号模块，可通过模块外部设置初始相位，频率，占空比。

   （2）通过模块外部按下“Up”和“ Down”开关分将占空比增加和减少。

   （3）通过在模块外部在内部比较器输入端加入正弦波形VTH（t）实现SPWM 波形。

   （4）通过模块调用法，实现多路PWM 信号发生器，顶层模块内可设置各单路PWM信号模块的初始相位，频率，占空比。

7. **基于Lenet网络的手写数字识别系统设计：**

   制作一个手写数字识别系统，基于全连接层和Lenet网络，并且保证一定的正确率，鼠标实现控制，VGA显示图像，参考项目：https://github.com/j3soon/Handwritten-Digit-Recognition-Painter。

## Docs

实验报告将会在期末给分后给出（当然主要也是我现在没啥时间，草）

## Video

这段时间有空会做一个视频，视频的内容大概是实验上板效果混剪，也算是纪念这一门不容易的课程，到时候会第一时间把链接转推过来

## Acknowledgement

感谢宽哥、飞哥、欣奕、国宁哥对本项目的贡献和对我的指导，非常感谢

感谢鄢老师能够设计这门不容易的课程，并且制定严格的验收流程

感谢人工智能系能够采购这样一批不错的Basys3开发板

感谢手写数字识别项目：https://github.com/j3soon/Handwritten-Digit-Recognition-Painter